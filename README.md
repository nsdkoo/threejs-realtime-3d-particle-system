# 🎮 Three.js 实时3D交互系统集合

本仓库包含两个基于 Three.js 和 MediaPipe 手势识别的3D交互项目：一个完整的射击游戏和一个艺术性粒子系统。

## 🎯 快速导航

| 想要... | 推荐项目 | 文件 |
|---------|----------|------|
| 🎮 玩游戏 | 星际猎手 | `fly.html` |
| 🎨 看特效 | Saturn Engine | `index.html` |
| 📚 学习 Three.js | 两者都可 | 查看源码 |

## 📦 项目列表

### 🚀 [fly.html] 星际猎手 - 手势控制3D飞行射击游戏
完整的3D射击游戏，支持手势控制，包含武器系统、敌人AI、粒子特效等。
- ✊ 握拳发射武器
- 💥 5种强力武器
- 🎮 完整游戏机制
- 🔊 程序化音效
- ⚡ 性能优化

### 🪐 [index.html] Saturn Engine - 交互粒子系统
优雅的3D粒子引擎演示，展示28000+粒子的实时交互效果。
- 🌌 核心粒子球（8000粒子）
- 🪐 土星环效果（20000粒子）
- 🖐 手势交互控制
- ✨ 发光混合效果
- 📱 响应式设计

---

# 🚀 项目一：星际猎手 (fly.html)

一款使用 Three.js 和 MediaPipe 手势识别技术打造的实时3D飞行射击游戏。

## ✨ 游戏特性

### 🎮 创新的手势控制系统
- **手掌移动** - 控制飞机在3D空间中自由移动
  - 手往右移 → 飞机往右 ✅ 镜像修正
  - 手往左移 → 飞机往左 ✅ 自然映射
  - 手往上移 → 飞机往上
  - 手往下移 → 飞机往下
- **✊ 握拳** - 发射武器（至少3根手指弯曲）
- **🖐 张开手** - 停止射击
- **实时手势反馈** - 屏幕右侧显示当前手势状态（✊射击中 / 🖐待命）

### 🔊 沉浸式音效系统
- **背景音乐** - 太空氛围音效（低频震动 + 环境音）
- **引擎音效** - 飞船引擎持续轰鸣声
- **射击音效** - 激光发射的电子音
- **爆炸音效** - 动态爆炸音（根据敌人类型不同）
- **击中音效** - 子弹命中敌人的打击感
- **道具拾取音效** - 悦耳的上升音阶
- **受伤音效** - 低沉的警告音
- **连击音效** - 连击数越高音调越高
- **波次提示音效** - 和弦音效提示新波次
- **游戏结束音效** - 下降音阶结束音
- **音效开关** - 右下角按钮可切换音效

### 🎯 丰富的游戏机制

#### 💥 强力武器系统（类似合金弹头）
- **🔫 标准激光**（默认）
  - 伤害：3，双发射击
  - 颜色：青色
  
- **💥 散弹枪**
  - 伤害：2 × 5发，扩散射击
  - 适合群体攻击
  - 颜色：橙色
  
- **🔥 重机枪**
  - 伤害：4 × 4发，超高射速
  - 密集火力压制
  - 颜色：黄色
  
- **🚀 导弹发射器**
  - 伤害：8，范围爆炸
  - 爆炸半径内所有敌人受伤
  - 颜色：红色
  
- **⚡ 穿透激光**
  - 伤害：5，穿透所有敌人
  - 一发多杀
  - 颜色：紫色

**武器获取**：
- 击败敌人30%概率掉落道具（其中40%为武器）
- 天空随机掉落武器箱
- 拾取后持续10秒
- 华丽的拾取特效

#### 🎮 其他游戏机制
- **4种敌人类型**
  - 普通敌人（红色二十面体，2HP，100分）
  - 快速敌人（黄色四面体，1HP，150分）
  - 坦克敌人（橙色方块，5+HP，200分）
  - Boss敌人（大红色八面体，10+HP，500分）
  
- **连击系统** - 连续击杀获得最高10倍分数加成
- **波次系统** - 每20击杀进入下一波，难度递增
- **能量系统** - 150能量，可连续发射33秒+
- **道具掉落** - 护盾、能量、武器箱

### 🎨 精美的视觉效果
- 多层星空背景与视差滚动
- 华丽的粒子爆炸效果
- 动态引擎火焰效果
- 流畅的飞机倾斜动画
- 实时手势状态显示
- 炫酷的HUD界面

### 📊 完整的游戏数据
- 实时分数统计
- 护盾（血量）系统
- 武器能量条
- 连击计数器
- 波次显示
- 击杀统计

## 🚀 快速开始

1. 直接在浏览器中打开 `fly.html` 文件
2. 允许摄像头权限（用于手势识别）
3. 将手掌对准摄像头开始游戏！

> 💡 提示：如果没有摄像头，游戏会自动切换到鼠标控制模式

## 🎮 控制方式

### 手势控制（推荐）
- 🖐️ **移动手掌** - 飞机跟随你的手移动（镜像映射）
- ✊ **握拳** - 持续发射武器
- 🖐 **张开手** - 停止射击

### 鼠标控制（备用）
- 🖱️ **移动鼠标** - 控制飞机位置
- 🖱️ **按住鼠标** - 发射武器

## 🛠️ 技术栈

- **Three.js (r128)** - 3D图形渲染引擎
- **MediaPipe Hands** - Google AI手势识别（21个关键点追踪）
- **Web Audio API** - 程序化音效生成（无需外部音频文件）
- **Tailwind CSS** - UI样式框架
- **原生 JavaScript** - 游戏逻辑与动画系统

## 📝 游戏提示

1. **音效控制** - 游戏默认静音，右下角按钮开启音效（🔇→🔊）
2. **武器系统** - 积极拾取彩色武器箱，伤害提升3-8倍！
3. **保持连击** - 连续击杀可获得额外分数加成（最高10倍）
4. **能量管理** - 150能量可连续发射33秒+，充足供应
5. **收集道具**：
   - 🟢 绿色圆环 = 护盾/能量补给
   - 🟠 橙色方块 = 散弹枪（扩散攻击）
   - 🟡 黄色方块 = 重机枪（火力压制）
   - 🔴 红色方块 = 导弹（范围爆炸）
   - 🟣 紫色方块 = 穿透激光（一击多杀）
6. **敌人类型**：
   - 红色二十面体 = 普通（2HP，100分）
   - 黄色四面体 = 快速（1HP，150分）
   - 橙色方块 = 坦克（5+HP，200分）
   - 大红色八面体 = Boss（10+HP，500分）
7. **武器策略**：
   - 散弹枪适合密集敌群
   - 重机枪适合持续输出
   - 导弹适合Boss和坦克
   - 穿透激光适合排队敌人
8. **波次系统** - 每20击杀进入下一波，难度递增
9. **手势技巧** - 握拳比捏合更稳定，手掌中心控制更精准
10. **基础伤害提升** - 标准激光伤害已从1提升到3

## 🎯 游戏目标

在无尽的太空中生存，击败尽可能多的敌人，获得最高分数！

## 🎵 音效系统特性

所有音效都使用 **Web Audio API** 实时生成，无需加载外部音频文件：

- ✅ **零延迟** - 即时响应游戏事件
- ✅ **体积小** - 不增加游戏文件大小
- ✅ **程序化** - 动态生成各种音效
- ✅ **自适应** - 根据游戏状态调整音效（如连击音高随连击数增加）
- ✅ **背景氛围** - 持续的太空环境音营造沉浸感
- ✅ **可控制** - 随时开关音效不影响游戏进行

## ⚡ 性能优化

游戏已进行全面性能优化，流畅运行不卡顿：

### 优化措施
- **粒子系统限制** - 最大200个粒子，超出自动清理
- **子弹数量控制** - 最大100发子弹，防止内存溢出
- **敌人生成限制** - 最大50个敌人同时存在
- **几何体简化** - 减少多边形数量（8边→4边）
- **粒子生成优化** - 减少50%粒子生成频率
- **爆炸效果优化** - 粒子数量减少50%
- **子弹尾迹优化** - 仅导弹和激光有尾迹
- **快速清理** - 粒子消失速度提升2倍
- **碰撞检测优化** - 早期退出，减少循环
- **武器道具限制** - 最多3个武器道具同时存在

### 性能参数
```javascript
最大子弹数: 100
最大粒子数: 200
最大敌人数: 50
```

### 性能监控
打开浏览器控制台可查看实时性能数据（每秒更新）

## 🔧 浏览器兼容性

- ✅ Chrome/Edge (推荐)
- ✅ Firefox
- ✅ Safari
- ⚠️ 需要支持摄像头访问权限
- ⚠️ 需要支持 Web Audio API
- 💻 推荐配置：双核CPU + 4GB RAM

---

# 🪐 项目二：Saturn Engine (index.html)

一个优雅的3D交互粒子系统，展示土星环效果和实时粒子动画。

## ✨ 特性

### 🌌 视觉效果

#### 核心粒子球（8000粒子）
- 🔵 **球形分布** - 使用球坐标系 (r, θ, φ) 生成
- 🔄 **自转动画** - 粒子围绕Y轴旋转
- 📈 **动态缩放** - 根据交互强度扩张 1-5 倍
- ✨ **发光效果** - Additive混合模式，蓝色发光
- 🎨 **颜色** - #60a5fa（亮蓝色）
  
#### 土星环（20000粒子）
- 🪐 **扁平环形** - 半径 180-330 单位
- 🌀 **轨道运动** - 速度 ∝ 1/√半径（符合开普勒定律）
- 🌊 **波动效果** - Y轴随时间正弦波动
- 📐 **倾斜视角** - 旋转 1.3 弧度展示立体感
- 🎨 **颜色** - #3b82f6（标准蓝色）
- 💫 **自转** - 缓慢围绕Z轴旋转

### 🎮 交互系统
- **鼠标控制**（默认）
  - 左右移动鼠标控制引力场强度
  - 实时缓动效果
  
- **手势识别**（自动检测）
  - 张开/收拢手掌控制粒子扩张
  - 基于拇指和小指距离计算
  - 平滑过渡动画

### 🎨 技术亮点
- **高性能粒子渲染** - 28000+粒子流畅运行
- **BufferGeometry** - 高效的几何体管理
- **AdditiveBlending** - 华丽的发光混合效果
- **实时顶点更新** - 每帧更新粒子位置
- **物理模拟** - 轨道速度符合平方反比定律
- **优雅降级** - 摄像头不可用时自动切换鼠标模式

## 🚀 快速开始

### 方式一：本地运行（推荐）
```bash
# 克隆或下载仓库
git clone https://github.com/your-repo/threejs-realtime-3d-particle-system.git

# 直接双击打开
open index.html  # macOS
start index.html # Windows
```

### 方式二：HTTP服务器
```bash
# 使用 Python
python -m http.server 8000

# 使用 Node.js
npx http-server

# 访问
http://localhost:8000/index.html
```

### 初次体验
1. 📂 打开 `index.html` 文件
2. 🖱️ 左右移动鼠标观察粒子变化
3. 📷 （可选）允许摄像头使用手势控制
4. 👀 观察核心球体和土星环的联动效果

## 🎮 控制方式

### 鼠标控制
- 🖱️ **向右移动** - 增强引力场，粒子扩张
- 🖱️ **向左移动** - 减弱引力场，粒子收缩

### 手势控制（需摄像头）
- 🖐 **张开手掌** - 粒子最大扩张
- ✊ **收拢手掌** - 粒子紧密聚集
- 👋 **渐变过渡** - 平滑的动画效果

## 🛠️ 技术实现

### 粒子系统架构

#### 核心粒子球体
```javascript
数量: 8000
分布算法: 球坐标系
  - r: 0-100 (幂函数分布 r^0.5)
  - θ: arccos(2×random - 1) (均匀球面)
  - φ: 0-2π (随机)
位置更新:
  x = r × sin(θ) × cos(φ + t) × scale
  y = r × sin(θ) × sin(φ + t) × scale
  z = r × cos(θ) × scale
参数:
  - 自转速度: 0.005-0.015 rad/frame
  - 缩放范围: 1-5×
  - 粒子大小: 2px
  - 颜色: #60a5fa
  - 不透明度: 0.8
```

#### 土星环系统
```javascript
数量: 20000
分布算法: 圆环极坐标
  - 半径: 180-330 (均匀分布)
  - 角度: 0-2π (随机)
轨道速度: v = 5/√r (开普勒第三定律简化)
位置更新:
  x = r × cos(angle) × expansion
  y = sin(2×angle + time) × 20 × expansion
  z = r × sin(angle) × expansion
参数:
  - 角速度: 0.5-1.0 (基础+扩张)
  - 倾斜角: 1.3 rad (约 74.5°)
  - 粒子大小: 1px
  - 颜色: #3b82f6
  - 不透明度: 0.4
```

### 数学原理

**球面均匀分布**:
```
θ = arccos(2u - 1), u ∈ [0,1]
φ = 2πv, v ∈ [0,1]
```
确保粒子在球面上均匀分布，避免极点聚集。

**轨道速度**:
```
v ∝ 1/√r
```
模拟引力系统中的开普勒运动，外层粒子速度更慢。

**缓动函数**:
```
expansion += (target - expansion) × 0.08
```
使用线性插值实现平滑过渡动画。

### 性能数据
- **粒子总数**: 28,000
- **帧率**: 60 FPS
- **渲染模式**: WebGL + 抗锯齿
- **混合模式**: Additive (发光效果)

## 📊 对比两个项目

| 特性 | Saturn Engine (index.html) | 星际猎手 (fly.html) |
|------|----------------------------|---------------------|
| 🎯 类型 | 艺术演示/技术展示 | 完整游戏 |
| 💫 粒子数 | 28,000 (固定) | 最大200 (动态) |
| 🎮 交互性 | 观赏为主 | 射击战斗 |
| 📝 代码行数 | ~210 行 | ~1800 行 |
| 🧩 复杂度 | 简洁优雅 | 功能丰富 |
| ⚡ 性能 | 高（优化粒子渲染） | 中（游戏逻辑多） |
| 🎨 视觉效果 | 抽象艺术 | 科幻射击 |
| 🖐 手势识别 | 手掌张合 | 握拳+移动 |
| 🔊 音效 | 无 | 完整音效系统 |
| 📱 适用场景 | 网站背景/展示 | 游戏娱乐 |
| 💻 学习价值 | 粒子系统/数学 | 游戏开发/物理 |
| 📦 文件大小 | 7 KB | 60 KB |
| ⏱️ 开发时间 | 1-2天 | 1-2周 |

## 🎯 应用场景

### Saturn Engine 适合：
- 🎨 **网站背景** - 科技公司官网、个人作品集动态背景
- 📱 **交互演示** - 展会、演示文稿中的手势识别技术展示
- 🎓 **教学案例** - Three.js 粒子系统、WebGL 渲染教程
- 🖼️ **艺术装置** - 博物馆、画廊的互动艺术展览
- 💼 **产品展示** - 科技产品发布会、宣传页面
- 🎬 **视频背景** - 直播、视频制作的动态背景素材
- 📊 **数据可视化前序** - 学习粒子系统后用于数据展示

### 星际猎手适合：
- 🎮 **游戏娱乐** - 休闲时间的射击游戏
- 🏫 **游戏开发教学** - 完整的游戏开发案例学习
- 🎯 **手势交互研究** - 研究手势在游戏中的应用
- 📚 **Three.js 进阶学习** - 物理碰撞、粒子特效、音效系统
- 🎪 **互动展览** - 游戏展、科技馆的互动游戏体验
- 💡 **创意原型** - 基于此改造开发自己的游戏

### 同时使用两个项目：
- 📖 **学习路径** - 先学 Saturn Engine（简单），再学星际猎手（复杂）
- 🎨 **组合应用** - 网站首页用 Saturn，游戏页面用星际猎手
- 👨‍🏫 **教学对比** - 展示从简单到复杂的开发过程

---

## 📝 总体说明

### 共同技术栈
- **Three.js (r128)** - 3D渲染引擎
- **MediaPipe Hands** - 手势识别
- **Tailwind CSS** - UI框架
- **原生 JavaScript** - 无框架依赖

### 浏览器要求
- ✅ Chrome/Edge 90+ (推荐)
- ✅ Firefox 88+
- ✅ Safari 14+
- ⚠️ 需要 WebGL 支持
- 📷 手势识别需要摄像头权限（可选）

### 开发者
使用 Three.js + MediaPipe 技术创建

**版本历史**:
- v3.1 - 星际猎手性能优化版 (2024)
- v1.0 - Saturn Engine 初版发布 (2024)

---

## 📖 学习资源

### 推荐学习顺序
1. **初学者** → Saturn Engine (`index.html`)
   - 代码简洁，易于理解
   - 专注于粒子系统核心概念
   - 适合入门 Three.js

2. **进阶者** → 星际猎手 (`fly.html`)
   - 完整的游戏架构
   - 复杂的交互逻辑
   - 性能优化技巧

### 相关文档
- [Three.js 官方文档](https://threejs.org/docs/)
- [MediaPipe Hands 文档](https://google.github.io/mediapipe/solutions/hands.html)
- [WebGL 基础教程](https://webglfundamentals.org/)
- [Web Audio API 指南](https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API)

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

### 贡献指南
1. Fork 本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

### 改进建议
- 🎨 添加更多粒子效果
- 🎮 新增游戏关卡
- 🔊 更丰富的音效
- 📱 移动端适配
- 🌐 多语言支持

## 📄 许可证

本项目仅供学习和研究使用。

## 🙏 致谢

- [Three.js](https://threejs.org/) - 强大的 3D 库
- [MediaPipe](https://mediapipe.dev/) - Google 的手势识别
- [Tailwind CSS](https://tailwindcss.com/) - 实用的 CSS 框架

## 📞 联系方式

如有问题或建议，欢迎通过以下方式联系：
- 📧 提交 Issue
- 💬 Pull Request 讨论
- 🌟 给项目点个 Star

---

**⭐ 如果这个项目对你有帮助，请给个 Star！**

Made with ❤️ using Three.js + MediaPipe